<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>使用pm2部署mongodb - Hello, world! I'm Yuliang</title>

  <!-- Edit site and author settings in `_config.yml` to make the social details your own -->

    <meta content="Hello, world! I'm Yuliang" property="og:site_name">
  
    <meta content="使用pm2部署mongodb" property="og:title">
  
  
    <meta content="article" property="og:type">
  
  
    <meta content="This is an android developer blog.
" property="og:description">
  
  
    <meta content="/%E4%BD%BF%E7%94%A8pm2%E9%83%A8%E7%BD%B2mongodb/" property="og:url">
  
  
    <meta content="2018-04-17T00:00:00+08:00" property="article:published_time">
    <meta content="/about/" property="article:author">
  
  
    <meta content="/homeblog/assets/img/mongodb.png" property="og:image">
  
  
    
  
  
    
    <meta content="mongodb" property="article:tag">
    
    <meta content="pm2" property="article:tag">
    
  

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@">
    <meta name="twitter:creator" content="@">
  
    <meta name="twitter:title" content="使用pm2部署mongodb">
  
  
    <meta name="twitter:url" content="/%E4%BD%BF%E7%94%A8pm2%E9%83%A8%E7%BD%B2mongodb/">
  
  
    <meta name="twitter:description" content="This is an android developer blog.
">
  
  
    <meta name="twitter:image:src" content="/homeblog/assets/img/mongodb.png">
  

	<meta name="description" content="">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta property="og:image" content="">
	<link rel="shortcut icon" href="/homeblog/assets/img/favicon/favicon.ico" type="image/x-icon">
	<link rel="apple-touch-icon" href="/homeblog/assets/img/favicon/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/homeblog/assets/img/favicon/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/homeblog/assets/img/favicon/apple-touch-icon-114x114.png">
	<!-- Chrome, Firefox OS and Opera -->
	<meta name="theme-color" content="#263959">
	<!-- Windows Phone -->
	<meta name="msapplication-navbutton-color" content="#263959">
	<!-- iOS Safari -->
	<meta name="apple-mobile-web-app-status-bar-style" content="#263959">
	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=PT+Serif:400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">
	<!-- Font Awesome -->
	<link rel="stylesheet" href="/homeblog/assets/fonts/font-awesome/css/font-awesome.min.css">
	<!-- Styles -->
	<link rel="stylesheet" href="/homeblog/assets/css/main.css">
</head>

<body>

  <div class="wrapper">
    <aside class="sidebar">
  <header>
    <div class="about">
      <div class="cover-author-image">
        <a href="/homeblog/"><img src="/homeblog/assets/img/yuliang_avatar.jpg" alt="Yuliang"></a>
      </div>
      <div class="author-name">Yuliang</div>
      <p>I am a android developer in Weibo. master</p>
    </div>
  </header> <!-- End Header -->
  <footer>
    <section class="contact">
      <h3 class="contact-title">Contact me</h3>
      <ul>
        
          <li><a href="https://twitter.com/artemsheludko_" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
        
        
          <li><a href="https://facebook.com/" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
        
        
          <li class="github"><a href="http://github.com/nickma1986" target="_blank"><i class="fa fa-github"></i></a></li>
        
        
          <li class="linkedin"><a href="https://in.linkedin.com/" target="_blank"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li>
        
        
          <li class="email"><a href="mailto:nickma1986@gmail.com"><i class="fa fa-envelope-o"></i></a></li>
        
      </ul>
    </section> <!-- End Section Contact -->
    <div class="copyright">
      <p>2018 &copy; Yuliang</p>
    </div>
  </footer> <!-- End Footer -->
</aside> <!-- End Sidebar -->
<div class="content-box clearfix">
  <article class="article-page">
  <div class="page-content">
    
    <div class="page-cover-image">
      <img class="page-image" src=/homeblog/assets/img/mongodb.png alt="使用pm2部署mongodb">
    </div> <!-- End Page Cover Image -->
    
    <div class="wrap-content">
      <header class="header-page">
        <h1 class="page-title">使用pm2部署mongodb</h1>
        <div class="page-date"><span>2018, Apr 17&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
      </header>
      <h2 id="pm2-mongodb">pm2-mongodb</h2>
<p>1.安装</p>
<blockquote>
  <p>npm install pm2-mongodb</p>
</blockquote>

<p>2.设置
ip (Defaults to 127.0.0.1) IP of mongodb server
port (Defaults to 27017) Port of mongodb server
username (Defaults to none) used for authentication
password (Defaults to none) used for authentication
authDB (Defaults to none) used for authentication
refresh_rate (Defaults to 5000 in ms): Control the refresh rate of the worker</p>

<blockquote>
  <p>pm2 set pm2-mongodb:refresh_rate 5000 (every 5 seconds)
pm2 set pm2-mongodb:ip 42.42.42.42 (ip of my mongodb server)
pm2 set pm2-mongodb:password “bestpasswd” (the password will be used to connect to mongo)</p>
</blockquote>

<h2 id="开机自动启动">开机自动启动</h2>
<p>1.验证</p>
<blockquote>
  <p>pm2 list</p>
</blockquote>

<p>执行结果</p>
<blockquote>
  <p>│ App name           │ id │ mode │ pid │ status │ restart │ uptime │ cpu │ mem    │ user    │ watching │
├────────────────────┼────┼──────┼─────┼────────┼─────────┼────────┼─────┼────────┼─────────┼──────────┤
│ FeedProject        │ 2  │ fork │ 621 │ online │ 0       │ 90s    │ 0%  │ 0 B    │ yuliang │ enabled  │
│ pm2-http-interface │ 1  │ fork │ 620 │ online │ 0       │ 90s    │ 0%  │ 0 B    │ yuliang │ disabled │
└────────────────────┴────┴──────┴─────┴────────┴─────────┴────────┴─────┴────────┴─────────┴──────────┘
 Module activated
┌─────────────┬─────────┬────────────┬────────┬─────────┬─────┬────────┬──────┐
│ Module      │ version │ target PID │ status │ restart │ cpu │ memory │ user │
├─────────────┼─────────┼────────────┼────────┼─────────┼─────┼────────┼──────┤
│ pm2-mongodb │ 1.0.1   │ N/A        │ online │ 0       │ 0%  │ 0 B</p>
</blockquote>

      <div class="page-footer">
        <div class="page-share">
          <a href="https://twitter.com/intent/tweet?text=使用pm2部署mongodb&url=/%E4%BD%BF%E7%94%A8pm2%E9%83%A8%E7%BD%B2mongodb/" title="Share on Twitter" rel="nofollow" target="_blank">Twitter</a>
          <a href="https://facebook.com/sharer.php?u=/%E4%BD%BF%E7%94%A8pm2%E9%83%A8%E7%BD%B2mongodb/" title="Share on Facebook" rel="nofollow" target="_blank">Facebook</a>
          <a href="https://plus.google.com/share?url=/%E4%BD%BF%E7%94%A8pm2%E9%83%A8%E7%BD%B2mongodb/" title="Share on Google+" rel="nofollow" target="_blank">Google+</a>
        </div>
        <div class="page-tag">
          
            <a href="/homeblog/tags#mongodb" class="tag">&#35; mongodb</a>
          
            <a href="/homeblog/tags#pm2" class="tag">&#35; pm2</a>
          
        </div>
      </div>
      <section class="comment-area">
  <div class="comment-wrapper">
    
    <div id="disqus_thread" class="article-comments"></div>
    <script>
      (function() {
          var d = document, s = d.createElement('script');
          s.src = '//mr-brown.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    
  </div>
</section> <!-- End Comment Area -->

    </div> <!-- End Wrap Content -->
  </div> <!-- End Page Content -->
</article> <!-- End Article Page -->

</div>

  </div>
  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', '', 'auto');
  ga('send', 'pageview');
</script> <!-- End Analytics -->

</body>
</html>
